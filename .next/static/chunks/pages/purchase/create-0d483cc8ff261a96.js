(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[221],{8694:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/purchase/create",function(){return a(9)}])},9270:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var n=a(5893);function r(){return(0,n.jsx)("div",{className:"loader"})}},9629:function(e,t,a){"use strict";a.d(t,{Z:function(){return g}});var n=a(5893),r=a(155),s=a.n(r);function c(e){var t=e.title;return(0,n.jsxs)("div",{className:s().topBar,children:[(0,n.jsx)("div",{className:s().logoBox}),(0,n.jsx)("h4",{className:s().pageTitle,children:t})]})}var o=a(2214),i=a.n(o),l=a(5675),u=a(5208),d=a.n(u);function p(e){var t=e.src;return!0===e.circle?(0,n.jsx)("div",{className:d().unsetImg,children:(0,n.jsx)(l.default,{src:t,layout:"fill",className:"".concat(d().customImg," ").concat(d().circle),alt:"Logo"})}):(0,n.jsx)("div",{className:d().unsetImg,children:(0,n.jsx)(l.default,{src:t,layout:"fill",className:d().customImg,alt:"Logo"})})}var m=a(1664),h=a(1163),f=a(9755),x=a.n(f);function j(e){var t=e.user,a=(0,h.useRouter)();return(0,n.jsxs)("div",{className:i().sidebar,children:[(0,n.jsx)("div",{className:i().avatar,children:(0,n.jsx)(p,{src:"/avatar.jpg",circle:!0})}),(0,n.jsx)("p",{className:i().userName,children:t.name}),(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{children:(0,n.jsx)(m.default,{href:"/dashboard",children:(0,n.jsxs)("a",{className:"\n                                ".concat("/dashboard"===a.pathname?i().active:"","\n                            "),children:[(0,n.jsx)("i",{className:"fa-solid fa-gauge-high"}),"Dashboard"]})})}),(0,n.jsx)("li",{children:(0,n.jsx)(m.default,{href:"/product",children:(0,n.jsxs)("a",{className:"\n                                ".concat("/product"===a.pathname||"/product/create"===a.pathname||"/product/[id]"===a.pathname?i().active:"","\n                            "),children:[(0,n.jsx)("i",{className:"fa-solid fa-bag-shopping"}),"Products"]})})}),(0,n.jsx)("li",{children:(0,n.jsx)(m.default,{href:"/category",children:(0,n.jsxs)("a",{className:"\n                                ".concat("/category"===a.pathname||"/category/create"===a.pathname||"/category/[id]"===a.pathname?i().active:"","\n                            "),children:[(0,n.jsx)("i",{className:"fa-solid fa-book"}),"Category"]})})}),(0,n.jsxs)("li",{children:[(0,n.jsx)(m.default,{href:"/customer",children:(0,n.jsxs)("a",{onClick:function(e){e.preventDefault(),x()(".customerMenu").slideToggle(),x()(".ci").toggleClass("open")},className:"\n                                ".concat("/customer"===a.pathname||"/customer/create"===a.pathname||"/customer/[id]"===a.pathname?i().active:"","\n                            "),children:[(0,n.jsx)("i",{className:"fa-solid fa-user-group"}),"Customer",(0,n.jsx)("span",{className:"fa-solid fa-caret-right float-end ".concat(i().dropdownIcon," ci")})]})}),(0,n.jsxs)("ul",{className:"customerMenu ".concat(i().subMenu),children:[(0,n.jsx)("li",{children:(0,n.jsx)(m.default,{href:"/customer",children:(0,n.jsx)("a",{className:"\n                                ".concat("/customer"===a.pathname||"/customer/[id]"===a.pathname?i().active:"","\n                            "),children:"Customer List"})})}),(0,n.jsx)("li",{children:(0,n.jsx)(m.default,{href:"/customer/create",children:(0,n.jsx)("a",{className:"\n                                ".concat("/customer/create"===a.pathname?i().active:"","\n                            "),children:"Add Customer"})})}),(0,n.jsx)("li",{children:(0,n.jsx)(m.default,{href:"#",children:(0,n.jsx)("a",{className:"\n                                ".concat("/customer/ledger"===a.pathname?i().active:"","\n                            "),children:"Customer Ledger"})})})]})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)(m.default,{href:"/supplier",children:(0,n.jsxs)("a",{onClick:function(e){e.preventDefault(),x()(".supplierMenu").slideToggle(),x()(".si").toggleClass("open")},className:"\n                                ".concat("/supplier"===a.pathname||"/supplier/create"===a.pathname||"/supplier/[id]"===a.pathname?i().active:"","\n                            "),children:[(0,n.jsx)("i",{className:"fa-solid fa-users"}),"Supplier",(0,n.jsx)("span",{className:"fa-solid fa-caret-right float-end ".concat(i().dropdownIcon," si")})]})}),(0,n.jsxs)("ul",{className:"supplierMenu ".concat(i().subMenu),children:[(0,n.jsx)("li",{children:(0,n.jsx)(m.default,{href:"/supplier",children:(0,n.jsx)("a",{className:"\n                                ".concat("/supplier"===a.pathname||"/supplier/[id]"===a.pathname?i().active:"","\n                            "),children:"Supplier List"})})}),(0,n.jsx)("li",{children:(0,n.jsx)(m.default,{href:"/supplier/create",children:(0,n.jsx)("a",{className:"\n                                ".concat("/supplier/create"===a.pathname?i().active:"","\n                            "),children:"Add Supplier"})})}),(0,n.jsx)("li",{children:(0,n.jsx)(m.default,{href:"#",children:(0,n.jsx)("a",{className:"\n                                ".concat("/supplier/ledger"===a.pathname?i().active:"","\n                            "),children:"Supplier Ledger"})})})]})]}),(0,n.jsx)("li",{children:(0,n.jsx)(m.default,{href:"/unit",children:(0,n.jsxs)("a",{className:"\n                                ".concat("/unit"===a.pathname||"/unit/create"===a.pathname||"/unit/[id]"===a.pathname?i().active:"","\n                            "),children:[(0,n.jsx)("i",{className:"fa-solid fa-scale-balanced"}),"Unit"]})})}),(0,n.jsx)("li",{children:(0,n.jsx)(m.default,{href:"/purchase",children:(0,n.jsxs)("a",{className:"\n                                ".concat("/purchase"===a.pathname||"/purchase/create"===a.pathname||"/purchase/[id]"===a.pathname||"/purchase/view/[id]"===a.pathname?i().active:"","\n                            "),children:[(0,n.jsx)("i",{className:"fa-solid fa-cart-plus"}),"Purchase"]})})})]})]})}var v=a(4764);function g(e){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c,{title:e.title}),(0,n.jsx)(j,{user:e.user}),e.children,(0,n.jsx)(v.B6,{children:(0,n.jsx)("div",{style:{position:"fixed",bottom:0,left:0,background:"red",width:"100%",textAlign:"center",color:"#ffffff",fontSize:"20px",zIndex:999999999999},children:"No Internet Connection"})})]})}},9:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSP:function(){return _},default:function(){return w}});var n=a(4051),r=a.n(n),s=a(5893),c=a(9629),o=a(9008),i=a(5538),l=a(9669),u=a.n(l),d=a(9755),p=a.n(d),m=a(7294),h=a(9198),f=a.n(h);function x(e,t,a,n,r,s,c){try{var o=e[s](c),i=o.value}catch(l){return void a(l)}o.done?t(i):Promise.resolve(i).then(n,r)}function j(e){var t=e.type,a=e.token,n={headers:{Authorization:"Bearer ".concat(a)}},c=(0,m.useState)(null),o=c[0],i=c[1],l=(0,m.useState)(),d=l[0],h=l[1],f=function(){var e,a=(e=r().mark((function e(){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p()(".autocompleteItemContainer.supplier").show(),o&&(clearTimeout(o),i(null)),"supplier"===t&&(a=p()(".autocompleteInput").val(),i(setTimeout((function(){u().get("".concat("http://pos-backend.webxcode.xyz/api","/supplier?name=").concat(a),n).then((function(e){!0===e.data.status&&h(e.data.suppliers.data)})).catch((function(e){console.log(e)}))}),1e3)));case 3:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function c(e){x(s,n,r,c,o,"next",e)}function o(e){x(s,n,r,c,o,"throw",e)}c(void 0)}))});return function(){return a.apply(this,arguments)}}();return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"autocompleteWrapper",children:[(0,s.jsx)("input",{type:"text",className:"form-control autocompleteInput supplier-input",autoComplete:"off",onKeyUp:f,onKeyDown:f,onChange:f}),t&&"supplier"===t&&(0,s.jsx)("input",{type:"hidden",className:"supplier-id"}),t&&"customer"===t&&(0,s.jsx)("input",{type:"hidden",className:"customer-id"}),(0,s.jsx)("div",{className:"autocompleteItemContainer supplier",children:d&&d.map((function(e){return(0,s.jsx)("div",{className:"autocompleteItem",onClick:function(){return a=e.name,n=e.id,p()(".supplier-input").val(a),"supplier"===t&&p()(".supplier-id").val(n),"customer"===t&&p()(".customer").val(n),void p()(".autocompleteItemContainer.supplier").hide();var a,n},children:e.name},"supplier-".concat(e.id))}))})]})})}var v=a(9270);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function N(e,t,a,n,r,s,c){try{var o=e[s](c),i=o.value}catch(l){return void a(l)}o.done?t(i):Promise.resolve(i).then(n,r)}function b(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function c(e){N(s,n,r,c,o,"next",e)}function o(e){N(s,n,r,c,o,"throw",e)}c(void 0)}))}}function y(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return g(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _=!0;function w(e){var t=e.user,a=(0,m.useState)(!1),n=a[0],l=a[1],d=(0,m.useState)(0),h=d[0],x=d[1],g=(0,m.useState)(0),N=g[0],_=g[1],w=(0,m.useState)(),C=w[0],k=w[1],S=(0,m.useState)(null),I=S[0],P=S[1],A=(0,m.useState)(new Date),T=A[0],B=A[1],F=(0,m.useState)([]),O=F[0],D=F[1],K={headers:{Authorization:"Bearer ".concat(t.token)}},M=function(){var e=b(r().mark((function e(t){var a,n,s,c,o,d,m,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),i.Am.loading("Submitting",{position:"bottom-right",theme:"dark"}),l(!0),a=p()(".productId").map((function(e,t){return p()(t).val()})).get(),n=p()(".productQuantity").map((function(e,t){return p()(t).val()})).get(),s=p()(".productPrice").map((function(e,t){return p()(t).val()})).get(),c=p()(".note").val(),o=p()(".date").val(),d=p()(".paid").val(),""!==(m=p()(".supplier-id").val())){e.next=15;break}return l(!1),i.Am.dismiss(),i.Am.error("Please select supplier",{position:"bottom-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"dark"}),e.abrupt("return");case 15:if(!(a.length<=0)){e.next=20;break}return l(!1),i.Am.dismiss(),i.Am.error("No product added",{position:"bottom-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"dark"}),e.abrupt("return");case 20:return e.prev=20,e.next=23,u().post("".concat("http://pos-backend.webxcode.xyz/api","/purchase/store"),{supplier_id:m,productIds:a,productQuantities:n,productPrices:s,date:o,comment:c,paid:d,total:h},K);case 23:!0===(f=e.sent).data.status?(i.Am.dismiss(),i.Am.success("Successfully Saved",{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"dark"}),p()("form").trigger("reset"),_(0),D([]),x(0),l(!1)):(i.Am.dismiss(),i.Am.success(f.data.error,{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"dark"}),l(!1)),e.next=32;break;case 27:e.prev=27,e.t0=e.catch(20),i.Am.dismiss(),i.Am.error(e.t0.response.data,{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"dark"}),l(!1);case 32:case"end":return e.stop()}}),e,null,[[20,27]])})));return function(t){return e.apply(this,arguments)}}(),L=function(e){var t=parseFloat(p()(".productPrice_".concat(e)).val())*parseFloat(p()(".productQuantity_".concat(e)).val());p()(".subtotal_".concat(e)).text("".concat(t)),z()},z=function(){x(0),p()(".subtotal").each((function(){var e=this;x((function(t){return t+parseFloat(p()(e).text())}))}))},U=function(){var e=p()(".paid").val();_(parseFloat(e))},Q=function(){var e=b(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p()(".autocompleteItemContainer.product").show(),I&&(clearTimeout(I),P(null)),t=p()(".search-product").val(),P(setTimeout((function(){u().get("".concat("http://pos-backend.webxcode.xyz/api","/product?name=").concat(t),K).then((function(e){!0===e.data.status&&k(e.data.products.data)})).catch((function(e){console.log(e)}))}),500));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.default,{children:(0,s.jsx)("title",{children:"Add New Purchase"})}),n&&!0===n&&(0,s.jsx)(v.Z,{}),(0,s.jsx)(i.Ix,{}),(0,s.jsx)(c.Z,{user:t,title:"Add New Purchase",children:(0,s.jsx)("div",{className:"content",children:(0,s.jsx)("div",{className:"custom-card",children:(0,s.jsxs)("form",{onSubmit:M,children:[(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{className:"col-md-6",children:[(0,s.jsx)("label",{htmlFor:"supplier",className:"form-label",children:"Supplier"}),(0,s.jsx)(j,{type:"supplier",token:t.token})]}),(0,s.jsxs)("div",{className:"col-md-6",children:[(0,s.jsx)("label",{htmlFor:"date",className:"form-label",children:"Date"}),(0,s.jsx)(f(),{selected:T,onChange:function(e){return B(e)},dateFormat:"yyyy-MM-dd",className:"form-control date"})]})]})}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"product",className:"form-label",children:"Choose Product"}),(0,s.jsxs)("div",{className:"autocompleteWrapper product",children:[(0,s.jsx)("input",{type:"text",className:"form-control autocompleteInput search-product",autoComplete:"off",onKeyUp:Q,onKeyDown:Q,onChange:Q,placeholder:"Search product"}),(0,s.jsx)("div",{className:"autocompleteItemContainer product",children:C&&C.map((function(e){return(0,s.jsx)("div",{className:"autocompleteItem",onClick:function(){return t=e,O.filter((function(e){return e.id===t.id})).length>0?alert("Product already added"):(D((function(e){return y(e).concat([t])})),x((function(e){return e+parseFloat(t.price)}))),p()(".autocompleteItemContainer.product").hide(),void p()(".search-product").val("");var t},children:e.name},"search-product-item-".concat(e.id))}))})]})]}),(0,s.jsxs)("table",{className:"table table-bordered table-hover",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{width:"5%",children:"SL"}),(0,s.jsx)("th",{width:"40%",children:"Product Name"}),(0,s.jsx)("th",{width:"15%",children:"Purchase Price"}),(0,s.jsx)("th",{width:"15%",children:"Quantity"}),(0,s.jsx)("th",{className:"text-end",width:"20%",children:"Subtotal"}),(0,s.jsx)("th",{className:"text-center",width:"5%",children:"Action"})]})}),(0,s.jsx)("tbody",{children:O.map((function(e,t){return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:t+1}),(0,s.jsxs)("td",{children:[e.name,(0,s.jsx)("input",{type:"hidden",className:"productId",defaultValue:e.id})]}),(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"text",className:"form-control productPrice productPrice_".concat(e.id),defaultValue:e.price,onChange:function(){return L(e.id)},onKeyUp:function(){return L(e.id)},onKeyDown:function(){return L(e.id)}})}),(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"text",className:"form-control productQuantity productQuantity_".concat(e.id),defaultValue:1,onChange:function(){return L(e.id)},onKeyUp:function(){return L(e.id)},onKeyDown:function(){return L(e.id)}})}),(0,s.jsxs)("td",{className:"text-end",children:[(0,s.jsx)("span",{className:"subtotal subtotal_".concat(e.id),children:e.price})," Tk."]}),(0,s.jsx)("td",{className:"text-center",children:(0,s.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){return function(e){var t=O.filter((function(t){return t.id!==e}));D(t),x(0),t.map((function(e){x((function(t){return t+parseFloat(p()(".subtotal_".concat(e.id)).text())}))}))}(e.id)},children:(0,s.jsx)("i",{className:"fa-solid fa-trash-can"})})})]},"purchase-product-item-".concat(e.id))}))}),(0,s.jsxs)("tfoot",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"text-end",colSpan:4,children:(0,s.jsx)("strong",{children:"Total"})}),(0,s.jsx)("td",{className:"text-end border-1 border-white d-block",children:(0,s.jsxs)("span",{className:"total",children:[h," Tk."]})}),(0,s.jsx)("td",{})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"text-end",colSpan:4,children:(0,s.jsx)("strong",{children:"Paid"})}),(0,s.jsx)("td",{className:"px-0",children:(0,s.jsx)("input",{type:"text",className:"form-control paid",onKeyUp:U,onKeyDown:U,onChange:U})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"text-end",colSpan:4,children:(0,s.jsx)("strong",{children:"Due"})}),(0,s.jsxs)("td",{className:"text-end border-1 border-white d-block",children:[(0,s.jsx)("span",{className:"due",children:h-N})," Tk."]})]})]})]}),(0,s.jsxs)("div",{className:"mb-3 mt-3",children:[(0,s.jsx)("label",{htmlFor:"note",className:"form-label",children:"Note"}),(0,s.jsx)("textarea",{id:"note",rows:"3",className:"note form-control"})]}),(0,s.jsx)("button",{className:"btn btn-success",type:"submit",children:"Save"})]})})})})]})}},5208:function(e){e.exports={customImg:"CustomImage_customImg__xW4_c",circle:"CustomImage_circle__xh9GU",unsetImg:"CustomImage_unsetImg__zmucL"}},2214:function(e){e.exports={sidebar:"Sidebar_sidebar___c9st",avatar:"Sidebar_avatar__Zsdwp",userName:"Sidebar_userName__GcLoc",active:"Sidebar_active___WQjj",dropdownIcon:"Sidebar_dropdownIcon__29uPR",subMenu:"Sidebar_subMenu__qi3Rh"}},155:function(e){e.exports={topBar:"TopBar_topBar__uVF4B",pageTitle:"TopBar_pageTitle__7KGK3",logoBox:"TopBar_logoBox__GxJfu"}}},function(e){e.O(0,[571,619,669,782,198,774,888,179],(function(){return t=8694,e(e.s=t);var t}));var t=e.O();_N_E=t}]);